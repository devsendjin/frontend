'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var e=require('path'),s=require('fs'),t=require('webpack'),o=require('autoprefixer'),r=require('postcss-flexbugs-fixes'),i=require('sass'),a=require('postcss'),n=require('html-webpack-plugin'),l=require('mini-css-extract-plugin'),u=require('circular-dependency-plugin'),c=require('@pmmmwh/react-refresh-webpack-plugin'),d=require('terser-webpack-plugin'),p=require('css-minimizer-webpack-plugin');function _(e){return e&&'object'==typeof e&&'default'in e?e:{default:e}}var m=_(e),f=_(s),g=_(t),P=_(o),h=_(r),v=_(i),b=_(a),x=_(n),E=_(l),O=_(u),D=_(c),y=_(d),C=_(p);const w=({foldersToLookup:e,onLookupSuccess:s,onLookupFailed:t,recursionMaxLevel:o=10})=>{let r=[],i=0,a="./";const n=()=>{if(i>=o){if(t)return void(a=t());throw Error(`Can't resolve directory. directoryDepth = ${i}`)}i++;try{r=f.default.readdirSync(a,{encoding:"utf-8"}),r.some((s=>e.some((e=>e===s))))||(a=a.concat("../"),n())}catch(e){console.error("Error occurred during dir reading: ",e),process.exit(0)}};n();const l=m.default.resolve(a);return s?s(l):l};var R;!function(e){e.development="development",e.production="production"}(R||(R={}));exports.WebpackConfig=class{settings;config={};constructor(){this.settings=(e=>{const{NODE_ENV:s,WEBPACK_SERVE:t,IS_DISTRIBUTED:o}=process.env,r="production"===s?R.production:R.development,i=r===R.production,a=!i,n="true"===t,l=w({foldersToLookup:["node_modules","scripts"],onLookupFailed:()=>{throw new Error("APP_ROOT can not be resolved")}}),u=m.default.resolve(l,"src");return{APP_ROOT:l,APP_SRC:u,APP_PUBLIC:m.default.resolve(l,"public"),publicUrlOrPath:"/",outputPaths:{js:"js",css:"css",images:"images",svg:"images/icon"},alias:{"@":u,"@UI":m.default.resolve(u,"components/UI"),"@images":m.default.resolve(u,"assets/images"),"@styles":m.default.resolve(u,"assets/styles")},port:4004,isServerRunning:n,MODE:r,__PROD__:i,__DEV__:a}})()}setupSettings(e){return this.settings=e(this.settings),this}logWebpack(e){return e?.(g.default),this}build(e){return this.config=(e=>{const s=(t=e,{postCss:()=>({loader:"postcss-loader",options:{implementation:b.default,postcssOptions:{plugins:[["postcss-preset-env",{stage:4}],h.default,P.default]}}}),sass:()=>({loader:"sass-loader",options:{sourceMap:t.__DEV__,implementation:v.default,additionalData:"\n          @import \"src/assets/styles/abstracts/_index.scss\";\n        ",sassOptions:{includePaths:[m.default.join(t.APP_SRC,"assets/styles/abstracts/**/*.scss")]}}}),css:()=>({loader:"css-loader",options:{sourceMap:t.__DEV__,importLoaders:2}}),cssModules:()=>({loader:"css-loader",options:{importLoaders:2,esModule:!0,modules:{localIdentName:t.__DEV__?"[local]--[folder]--[hash:base64:3]":"[hash:base64:6]"},sourceMap:t.__DEV__}}),styleOrExtractCss:()=>t.isServerRunning?{loader:"style-loader"}:E.default.loader});var t;const o=(e=>{const s={DefinePlugin:new g.default.DefinePlugin({__DEV__:e.__DEV__,__PROD__:e.__PROD__}),CircularDependencyPlugin:new O.default({exclude:/node_modules/,include:/react-hook-form/,failOnError:!0,cwd:e.APP_ROOT,allowAsyncCycles:!1}),HtmlWebpackPlugin:new x.default({template:m.default.join(e.APP_SRC,"index.pug"),filename:m.default.join(e.APP_PUBLIC,"index.html"),inject:"body",minify:e.__PROD__}),ReactRefreshWebpackPlugin:new D.default({overlay:!1}),MiniCssExtractPlugin:new E.default({filename:`${e.outputPaths.css}/[contenthash].css`})},t=[s.DefinePlugin,s.CircularDependencyPlugin,s.HtmlWebpackPlugin];return e.isServerRunning&&t.push(s.ReactRefreshWebpackPlugin),(e.__PROD__||e.__DEV__&&!e.isServerRunning)&&t.push(s.MiniCssExtractPlugin),t})(e);return{mode:e.MODE,entry:{[`${e.outputPaths.js}/`]:m.default.join(e.APP_SRC,"index.tsx")},output:{filename:"[name][contenthash].js",path:e.APP_PUBLIC,chunkFilename:"[id].[chunkhash].js",publicPath:e.publicUrlOrPath},resolve:{extensions:[".js",".jsx",".ts",".tsx",".css",".sass",".scss",".json"],alias:e.alias},target:"web",devtool:!!e.__DEV__&&"eval-cheap-module-source-map",devServer:e.__DEV__?{static:{directory:m.default.join(e.APP_ROOT,"public")},client:{logging:"none",overlay:!1},compress:!0,hot:e.isServerRunning,port:e.port,historyApiFallback:!0,devMiddleware:{writeToDisk:!1}}:{},stats:e.__DEV__||e.isServerRunning?"errors-warnings":"detailed",ignoreWarnings:[{message:/color-adjust/}],optimization:e.__PROD__?{nodeEnv:e.MODE,minimize:!0,minimizer:[new C.default({minimizerOptions:{preset:["default",{discardComments:{removeAll:!0}}]}}),new y.default({exclude:/node_modules/,extractComments:!1,terserOptions:{parse:{html5_comments:!1},mangle:!0,sourceMap:!1,compress:{defaults:!0,drop_console:!1,keep_infinity:!0,passes:2},format:{comments:!1,preamble:"",quote_style:3,preserve_annotations:!1,ecma:2020},ecma:2020,keep_classnames:!1,keep_fnames:!1,safari10:!1}})]}:{},module:{rules:[{test:/\.ts(x?)$/i,exclude:/node_modules/,use:["babel-loader","ts-loader"]},{test:/\.jsx$/i,exclude:/node_modules/,use:[{loader:"babel-loader",options:{presets:["@babel/preset-react"]}}]},{test:/\.js$/i,exclude:/node_modules/,use:["babel-loader"]},{test:/\.module\.s[ac]ss$/i,use:[s.styleOrExtractCss(),s.cssModules(),s.postCss(),s.sass()]},{test:/\.s[ac]ss$/i,exclude:/\.module\.s[ac]ss$/i,use:[s.styleOrExtractCss(),s.css(),s.postCss(),s.sass()]},{test:/\.module\.css$/i,use:[s.styleOrExtractCss(),s.cssModules(),s.postCss()]},{test:/\.css$/i,use:[s.styleOrExtractCss(),s.css(),s.postCss()],exclude:/\.module\.css$/i},{test:/\.(avif|webp|png|jpe?g|gif)$/i,exclude:/\.(svg|eot|ttf|woff|woff2)$/,use:[{loader:"file-loader",options:{outputPath:e.outputPaths.images,name:"[name].[ext]",publicPath:e.publicUrlOrPath}}]},{test:/\.svg$/i,exclude:/node_modules/,use:["@svgr/webpack",{loader:"url-loader",options:{limit:3e3,name:"[name].[ext]",outputPath:e.outputPaths.svg,publicPath:e.publicUrlOrPath}}]},{test:/\.pug$/i,use:{loader:"pug-loader",options:{pretty:e.__DEV__}},exclude:"/node_modules/"}]},plugins:o}})(this.settings),e&&(this.config=e(this.config)),this.config}},exports.resolvePath=w;
//# sourceMappingURL=index.cjs.js.map
